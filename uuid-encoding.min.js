Bridge.assembly("uuid-encoding.js",function(){"use strict";(function(){var uuid_encoding={};Bridge.define("Base32Guid",{$metadata:function(){return{att:1048577,a:2,m:[{a:2,isSynthetic:!0,n:".ctor",t:1,sn:"ctor"},{a:2,n:"Create",is:!0,t:8,sn:"Create",rt:System.String}]}},$scope:uuid_encoding,statics:{methods:{Create:function(){return uuid_encoding.uuid_encoding.Base32.Encode(System.Guid.newGuid().toByteArray())}}}});Bridge.define("uuid_encoding.Base32",{$metadata:function(){return{att:385,a:2,s:!0,m:[{n:".cctor",t:1,sn:"ctor",sm:!0},{a:2,n:"Decode",is:!0,t:8,pi:[{n:"encoded",pt:System.String,ps:0}],sn:"Decode",rt:System.Array.type(System.Byte),p:[System.String]},{a:2,n:"Encode",is:!0,t:8,pi:[{n:"data",pt:System.Array.type(System.Byte),ps:0},{n:"padOutput",dv:!1,o:!0,pt:System.Boolean,ps:1}],sn:"Encode",rt:System.String,p:[System.Array.type(System.Byte),System.Boolean]},{a:1,n:"numberOfTrailingZeros",is:!0,t:8,pi:[{n:"i",pt:System.Int32,ps:0}],sn:"numberOfTrailingZeros",rt:System.Int32,p:[System.Int32],box:function($v){return Bridge.box($v,System.Int32)}},{a:1,n:"CHAR_MAP",is:!0,t:4,rt:System.Collections.Generic.Dictionary$2(System.Char,System.Int32),sn:"CHAR_MAP"},{a:1,n:"DIGITS",is:!0,t:4,rt:System.Array.type(System.Char),sn:"DIGITS",ro:!0},{a:1,n:"MASK",is:!0,t:4,rt:System.Int32,sn:"MASK",ro:!0,box:function($v){return Bridge.box($v,System.Int32)}},{a:1,n:"SEPARATOR",is:!0,t:4,rt:System.String,sn:"SEPARATOR"},{a:1,n:"SHIFT",is:!0,t:4,rt:System.Int32,sn:"SHIFT",ro:!0,box:function($v){return Bridge.box($v,System.Int32)}}]}},$scope:uuid_encoding,statics:{fields:{DIGITS:null,MASK:0,SHIFT:0,CHAR_MAP:null,SEPARATOR:null},ctors:{init:function(){this.CHAR_MAP=new(System.Collections.Generic.Dictionary$2(System.Char,System.Int32));this.SEPARATOR="-"},ctor:function(){var $t,i;for(uuid_encoding.uuid_encoding.Base32.DIGITS=($t="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".toLowerCase(),System.String.toCharArray($t,0,$t.length)),uuid_encoding.uuid_encoding.Base32.MASK=uuid_encoding.uuid_encoding.Base32.DIGITS.length-1|0,uuid_encoding.uuid_encoding.Base32.SHIFT=uuid_encoding.uuid_encoding.Base32.numberOfTrailingZeros(uuid_encoding.uuid_encoding.Base32.DIGITS.length),i=0;i<uuid_encoding.uuid_encoding.Base32.DIGITS.length;i=i+1|0)uuid_encoding.uuid_encoding.Base32.CHAR_MAP.set(uuid_encoding.uuid_encoding.Base32.DIGITS[System.Array.index(i,uuid_encoding.uuid_encoding.Base32.DIGITS)],i)}},methods:{numberOfTrailingZeros:function(i){var y,n;return i===0?32:(n=31,y=i<<16,y!==0&&(n=n-16|0,i=y),y=i<<8,y!==0&&(n=n-8|0,i=y),y=i<<4,y!==0&&(n=n-4|0,i=y),y=i<<2,y!==0&&(n=n-2|0,i=y),n-(i<<1>>>0>>>31|0)|0)},Decode:function(encoded){var $t,c;if(encoded=System.String.replaceAll(encoded.trim(),uuid_encoding.uuid_encoding.Base32.SEPARATOR,""),encoded=System.Text.RegularExpressions.Regex.replace(encoded,"[=]*$",""),encoded=encoded.toLowerCase(),encoded.length===0)return System.Array.init(0,0,System.Byte);var encodedLength=encoded.length,outLength=Bridge.Int.div(Bridge.Int.mul(encodedLength,uuid_encoding.uuid_encoding.Base32.SHIFT),8)|0,result=System.Array.init(outLength,0,System.Byte),buffer=0,next=0,bitsLeft=0;$t=Bridge.getEnumerator(System.String.toCharArray(encoded,0,encoded.length));try{while($t.moveNext()){if(c=$t.Current,!uuid_encoding.uuid_encoding.Base32.CHAR_MAP.containsKey(c))throw new uuid_encoding.uuid_encoding.Base32.DecodingException("Illegal character: "+String.fromCharCode(c));buffer=buffer<<uuid_encoding.uuid_encoding.Base32.SHIFT;buffer=buffer|uuid_encoding.uuid_encoding.Base32.CHAR_MAP.get(c)&uuid_encoding.uuid_encoding.Base32.MASK;bitsLeft=bitsLeft+uuid_encoding.uuid_encoding.Base32.SHIFT|0;bitsLeft>=8&&(result[System.Array.index(Bridge.identity(next,next=next+1|0),result)]=buffer>>(bitsLeft-8|0)&255,bitsLeft=bitsLeft-8|0)}}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$dispose()}return result},Encode:function(data,padOutput){var pad,index,padding;if(padOutput===void 0&&(padOutput=!1),data.length===0)return"";if(data.length>=268435456)throw new System.ArgumentOutOfRangeException("data");for(var outputLength=Bridge.Int.div((Bridge.Int.mul(data.length,8)+uuid_encoding.uuid_encoding.Base32.SHIFT|0)-1|0,uuid_encoding.uuid_encoding.Base32.SHIFT)|0,result=new System.Text.StringBuilder("",outputLength),buffer=data[System.Array.index(0,data)],next=1,bitsLeft=8;bitsLeft>0||next<data.length;)bitsLeft<uuid_encoding.uuid_encoding.Base32.SHIFT&&(next<data.length?(buffer=buffer<<8,buffer=buffer|data[System.Array.index(Bridge.identity(next,next=next+1|0),data)]&255,bitsLeft=bitsLeft+8|0):(pad=uuid_encoding.uuid_encoding.Base32.SHIFT-bitsLeft|0,buffer=buffer<<pad,bitsLeft=bitsLeft+pad|0)),index=uuid_encoding.uuid_encoding.Base32.MASK&buffer>>(bitsLeft-uuid_encoding.uuid_encoding.Base32.SHIFT|0),bitsLeft=bitsLeft-uuid_encoding.uuid_encoding.Base32.SHIFT|0,result.append(String.fromCharCode(uuid_encoding.uuid_encoding.Base32.DIGITS[System.Array.index(index,uuid_encoding.uuid_encoding.Base32.DIGITS)]));return padOutput&&(padding=8-result.getLength()%8|0,padding>0&&result.append(System.String.fromCharCount(61,padding===8?0:padding))),result.toString()}}}});Bridge.define("uuid_encoding.Base32.DecodingException",{inherits:[System.Exception],$metadata:function(){return{td:uuid_encoding.uuid_encoding.Base32,att:1048578,a:2,m:[{a:2,n:".ctor",t:1,p:[System.String],pi:[{n:"message",pt:System.String,ps:0}],sn:"ctor"}]}},$scope:uuid_encoding,ctors:{ctor:function(message){this.$initialize();System.Exception.ctor.call(this,message)}}});module.exports.uuid_encoding=uuid_encoding})()});